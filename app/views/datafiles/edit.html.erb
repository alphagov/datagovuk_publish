<% content_for :page_title do %>
  Add a link to your data -
<% end %>

<div class="datasets">
  <% if @datafile.errors.any? %>
    <div class="error-summary" role="group" aria-labelledby="error-summary-heading-example-1" tabindex="-1">
      <h1 class="heading-medium error-summary-heading" id="error-summary-heading-example-1">
        There was a problem
      </h1>
      <ul class="error-summary-list">
        <% @datafile.errors.each do |attr, message| %>
          <li>
            <a href="#<%= attr.to_s %>_form_group">
              <%= message %>
            </a>
            <span class="visuallyhidden">.</span>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <h1 class="heading-large">Add a link to your data</h1>

  <%= form_for @datafile, as: :datafile, url: file_path(@dataset, file: @datafile), method: :put do |f| %>
    <%= dataset_field f, @datafile,
    name: 'url',
    label: 'URL',
    input_type: :text_field,
    input_class: 'form-control-2-3',
    hint: 'Enter a link (beginning with http:// or https://) to point directly to your data file. The file will usually be uploaded to either your organisation’s website or another website, like GOV.UK or Amazon Web Services (AWS).',
    value: @datafile.url %>

    <%= dataset_field f, @datafile,
    name: 'name',
    label: 'Link name',
    input_type: :text_field,
    input_class: 'form-control-2-3',
    hint: 'The link name mustn’t be the same as the URL. It should clearly describe the data so users can find it easily.',
    value: @datafile.name %>

    <% if @dataset.weekly? %>
      <%= render 'date_field', period: 'start' %>
      <%= render 'date_field', period: 'end' %>
    <% end %>

    <% if @dataset.monthly? %>
      <%= render 'month_input' %>
    <% end %>

    <% if @dataset.quarterly? %>
      <%= render 'quarter_inputs' %>
    <% end %>

    <% if @dataset.annually? || @dataset.financial_yearly? %>
      <%= render 'year_input' %>
    <% end %>

    <div class="form-group">
      <p><%= f.submit 'Save and continue', class: 'button' %></p>
      <p>
      <%= link_to 'Cancel', dataset_path(@dataset) %>
      </p>
    </div>
  <% end %>
</div>
